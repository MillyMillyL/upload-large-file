(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const d of e.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function p(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=p(t);fetch(t.href,e)}})();const _="http://localhost:8000/",u={No_File:"Please choose a file to upload",Invalid_Type:"Unsupported file type",UPLOAD_FAILED:"Failed to upload",UPLOAD_SUCCESS:"Successfully uploaded"},D=["video/mp4","audio/mp3"],I=64*1024,P={UPLOAD_VIDEO:_+"upload_video"};(s=>{const l=s.getElementById("uploadProgress"),p=s.getElementById("videoUploader"),r=s.getElementById("uploadInfo"),t=s.getElementById("uploadBtn");let e=0;const d=()=>{y()};function y(){t.addEventListener("click",g)}async function g(){const i=p.files[0];if(!i){r.innerText=u.No_File;return}if(!D.includes(i.type)){r.innerText=u.Invalid_Type;return}const{name:n,size:a,type:f}=i,m=new Date().getTime()+"_"+n;let c=null;for(l.max=a,r.innerText="";e<a;){const o=i.slice(e,e+I),O=E({name:n,type:f,size:a,fileName:m,uploadedSize:e,file:o});try{c=await axios.post(P.UPLOAD_VIDEO,O),console.log(c)}catch(U){r.innerText=u.UPLOAD_FAILED,console.log(U.message);return}e+=o.size,l.value=e}r.innerText=u.UPLOAD_SUCCESS,l.value=null,L(c.data.video_url)}function E({name:i,type:n,size:a,fileName:f,uploadedSize:m,file:c}){const o=new FormData;return o.append("name",i),o.append("type",n),o.append("size",a),o.append("fileName",f),o.append("uploadedSize",m),o.append("file",c),o}function L(i){const n=document.createElement("video");n.controls=!0,n.width="500",n.src=i,document.body.appendChild(n)}d()})(document);
